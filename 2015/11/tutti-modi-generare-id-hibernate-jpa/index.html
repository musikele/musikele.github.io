--- layout: default ---

<div id="main">
	<article>
		<header class="major">
			<h2 class="post-title"><a href="/2015/11/tutti-modi-generare-id-hibernate-jpa/">Tutti i modi per generare ID in Hibernate &#038; JPA</a></h2>
			<p class="post-meta">Nov 27, 2015 â€¢ musikele</p>
		</header>

		<section>

			<p><a href="https://i0.wp.com/michelenasti.com/wp-content/uploads/2015/11/hibernate.jpg"><img class="size-full wp-image-456 alignleft" src="https://i0.wp.com/michelenasti.com/wp-content/uploads/2015/11/hibernate.jpg?fit=200%2C195" alt="Veramente brutto il logo di Hibernate, vero? " data-recalc-dims="1" /></a>Siccome dovevo creareÂ ID con alcune proprietÃ  particolari per alcuni oggetti, ho iniziato a cercare tutti i vari modi in cui si potevano assegnare ID a oggetti JPA e Hibernate.</p>

<p>Avevo questo articolo nelle bozze da un bel poâ€™; f<span style="line-height: 1.5;">ondamentalmente sono un programmatore Full-Stack ma, quando una cosa non ti piace, tendi aÂ </span><span style="line-height: 1.5;">non memorizzarla ğŸ™‚Â quindi mi segno molte cose che faccio qui, sul blog, che magari poi diventano articoli.Â </span></p>

<h2 id="jpa">JPA</h2>

<p>(vediÂ <a href="https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing">https://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing</a>)</p>

<ul>
  <li>
    <p><strong>tableÂ sequencing</strong>, ossia prende il prossimo ID da una tabella appositamente configurata sul proprio DB. Portabile, ma lento. Esempio: &lt;pre class="lang:java decode:true"&gt;@Entity
public class Employee {
@Id
@TableGenerator(name=â€TABLE_GENâ€, table=â€SEQUENCE_TABLEâ€, pkColumnName=â€SEQ_NAMEâ€,
    valueColumnName=â€SEQ_COUNTâ€, pkColumnValue=â€EMP_SEQâ€)
@GeneratedValue(strategy=GenerationType.TABLE, generator=â€TABLE_GENâ€)
private long id;
â€¦
}&lt;/pre&gt;</p>
  </li>
  <li>
    <p><span class="mw-headline"><strong>Sequence objects</strong>, usati solo sui DB che li supportano, tipo Oracle. Sono degli oggetti che contengono il prossimo ID da utilizzare. Funziona bene ma non Ã¨ portabile (MySql non ce lâ€™ha).Â </span> &lt;pre class="lang:java decode:true"&gt;â€¦
@Entity
public class Employee {
@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator=â€EMP_SEQâ€)
@SequenceGenerator(name=â€EMP_SEQâ€, sequenceName=â€EMP_SEQâ€, allocationSize=100)
private long id;
â€¦
}&lt;/pre&gt;</p>
  </li>
  <li>
    <p><span class="mw-headline"><strong>Identity sequencing</strong>, incrementa di 1 lâ€™ID ad ogni passo. Dipende dal DB purtroppo, ad esempio Oracle non lo supporta.Â </span> &lt;pre class="lang:java decode:true "&gt;â€¦
@Entity
public class Employee {
@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private long id;
â€¦
}&lt;/pre&gt;</p>

    <p>&lt;/li&gt; &lt;/ul&gt;</p>

    <h2 id="hibernate">HIBERNATE</h2>

    <p>Con Hibernate vi sono altre alternative possibili, alcune sono piccole variazioni di quelle viste in precedenza (e vi consiglio di utilizzare JPA piuttosto che legarvi a Hibernate).Â Quasi sempre, al posto di SequenceGenerator useremo GenericGenerator che Ã¨ proprio di Hibernate.</p>

    <ul>
      <li><strong>HiLo</strong> : un algoritmo per generare ID numerici (Long, Int) che fa poche chiamate al DB per conoscere la sequenza corrente; se due transazioni concorrenti provano ad avere lo stesso ID, allora otterranno due numeri profondamente diversi. Esempio di uso:Â <a href="http://vladmihalcea.com/2014/06/23/the-hilo-algorithm/">http://vladmihalcea.com/2014/06/23/the-hilo-algorithm/</a></li>
      <li>
        <p>Se la chiave Ã¨ di tipo Stringa, si puÃ² usare un <strong>generatore di UUID</strong> : &lt;pre class="lang:java decode:true"&gt;@Id
@GeneratedValue(generator = â€œsystem-uuidâ€)
@GenericGenerator(name = â€œsystem-uuidâ€, strategy = â€œuuidâ€)
private String id;&lt;/pre&gt;</p>
      </li>
      <li>â€œ<strong>assigned</strong>â€ : il programmatore si deve preoccupare di generare un ID (univoco) prima di memorizzare lâ€™entitÃ </li>
      <li>â€œ<strong>increment</strong>â€ : in Hibernate equivale sempre a max(id) +1 (diverso da JPA!)</li>
      <li><strong>custom id generator</strong> : questo sembra essere ciÃ² che mi serve ma lâ€™articolo risale al 2011 e la configurazione Ã¨ descritta in xml. Devo trovare la versione con le annotazioni.Â [http://learningviacode.blogspot.it/2011/11/creating-custom-id-generator.html?showComment=1436277811662#c1961377562249766537</li>
    </ul>
  </li>
</ul>

<p>](http://learningviacode.blogspot.it/2011/11/creating-custom-id-generator.html?showComment=1436277811662#c1961377562249766537) Su stack overflow câ€™Ã¨ una versione che utilizza le annotations:Â <a href="http://stackoverflow.com/questions/11631800/hibernate-how-specify-custom-sequence-generator-class-name-using-annotations">http://stackoverflow.com/questions/11631800/hibernate-how-specify-custom-sequence-generator-class-name-using-annotations</a></p>

 
<ul class="share-buttons">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/) + '&t=' + encodeURIComponent(document.title)); return false;"><img alt="Share on Facebook" src="/images/icons/Facebook.svg"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/&text=Tutti i modi per generare ID in Hibernate &#038; JPA:%20https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/&via=micnasti" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(Tutti i modi per generare ID in Hibernate &#038; JPA) + ':%20'  + encodeURIComponent(https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/)); return false;"><img alt="Tweet" src="/images/icons/Twitter.svg"></a></li>
  <li><a href="https://plus.google.com/share?url=https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/)); return false;"><img alt="Share on Google+" src="/images/icons/Google+.svg"></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/&title=Tutti i modi per generare ID in Hibernate &#038; JPA&summary=&source=https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Share on LinkedIn" src="/images/icons/LinkedIn.svg"></a></li>
</ul>

		</section>

		<section>
			 <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
    	//var disqus_identifier = 'https://michelenasti.com';
			//var disqus_url = '';
			var disqus_url = 'https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/';
			var disqus_identifier = 'https://michelenasti.com/2015/11/tutti-modi-generare-id-hibernate-jpa/';

    };
    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//michele-nastis-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
		</section>

		<footer>
			<br> Altri articoli:
			<br>
			<div class="row">
				

				<article class="6u 12u(small) excerpt">
					<header>
						<h2><a href="/2015/11/ritorno-dal-codemotion-milan-2015/">di ritorno dal Codemotion Milan 2015</a></h2>
					</header>
					<section>
						<p>Ed eccomi di ritorno dal <a href="http://milan2015.codemotionworld.com/">secondo Codemotion</a> dellâ€™anno! Questa volta sono stato a Milano, dove ho seguito talk interessanti purtroppo solo per il giorno di sabato. Qui potete trovare altri articoli sul <a href="http://michelenasti.com/2015/01/codemotion-2015/">Codemotion di Roma</a>.</p>


					</section>
					<footer>
						<ul class="actions">
							<li><a href="/2015/11/ritorno-dal-codemotion-milan-2015/" class="button">Read More</a></li>
						</ul>
					</footer>
				</article>
				 

				<article class="6u$ 12u(small) excerpt f-right">
					<header>
						<h2><a href="/2015/11/459/">Leggere la query Hibernate in debug</a></h2>
					</header>
					<section>
						<p>vi capita mai di averÂ disabilitato le query Hibernate/Jpa in Tomcat ? Ossia, le query non vengono stampate nella console. In genere si disabilitano altrimenti le prestazioni dellâ€™app diventano scarsissime.</p>


					</section>
					<footer>
						<ul class="actions">
							<li><a href="//2015/11/459/" class="button">Read More</a></li>
						</ul>
					</footer>
				</article>
				
			</div>
		</footer>

	</article>

</div>